mode: evaluation_focus   # evaluation_focus | open_world

retrieval:
  collection: regs
  top_k: 5

regulations_allowed:
  - dsa
  - california_kids_act
  - florida_online_protections
  - utah_social_media_regulation
  - us_ncmec_reporting

thresholds:
  confidence_min: 0.55
  reg_evidence_min_sim: 0.50
  regulations_max: 1
  gating_tie_eps: 0.02

abstain_patterns:
  ambiguous_geo:
    - "(?i)(global(ly)?|worldwide).*(except|minus).*\\bKR\\b"
    - "(?i)(except|minus).*\\bKR\\b.*(global(ly)?|worldwide)"

business_only_hints:
  # --- experimentation / rollout ---
  - '(?i)\b(ab|a/?b|a-?b)\s*(test|testing|experiment|exp)\b'
  - '(?i)\bmultivariate(?:\s+test(?:ing)?)?\b'
  - '(?i)\bmvt\b'
  - '(?i)\b(control|treatment)\s+group\b'
  - '(?i)\bvariant(s)?\b'
  - '(?i)\bbucket(ed|ing)?\b'
  - '(?i)\bcohort(s)?\b'
  - '(?i)\bramp(?:ing)?\s*(up|down)?\b'
  - '(?i)\bcanary\b'
  - '(?i)\b(progressive|gradual)\s+rollout\b'
  - '(?i)\bpilot\b'
  - '(?i)proof\s+of\s+concept'
  - '(?i)\bbeta\b'
  - '(?i)\balpha\b'
  - '(?i)\bdogfood(ing)?\b'
  - '(?i)\binternal\s+(test|testing|pilot|beta)\b'
  - '(?i)\bstaff[-\s]?only\b'
  - '(?i)\bshadow\s*mode\b'
  - '(?i)\bdark\s+launch\b'
  - '(?i)\bsoft\s+launch\b'
  - '(?i)\bquiet\s+launch\b'
  - '(?i)\bfeature\s+(toggle|switch|gate)\b'
  - '(?i)\bkill\s+switch\b'
  - '(?i)\broll(?:out|back|forward)\b'

  # --- pure UI/UX tweaks ---
  - '(?i)\bui\s*overhaul\b'
  - '(?i)\bui\b'
  - '(?i)\bux\b'
  - '(?i)\blayout\b'
  - '(?i)\bredesign\b'
  - '(?i)\breskin\b'
  - '(?i)\brefresh\b'
  - '(?i)\btheme\b'
  - '(?i)\bdark\s*(mode|theme)\b'
  - '(?i)\baccessibilit(?:y|ies).*(contrast|font|theme)'

  # --- media / content presentation ---
  - '(?i)\bautoplay\b'
  - '(?i)\binfinite\s+scroll\b'
  - '(?i)\bcarousel\b'
  - '(?i)\bvideo\s+repl(?:y|ies)\b'
  - '(?i)\bstories\b'
  - '(?i)\breaction\s+gifs?\b'
  - '(?i)\bstickers?\b'
  - '(?i)\bemoji\b'

  # --- gamification / creator UX ---
  - '(?i)\bleaderboard(s)?\b'
  - '(?i)\bpoints?\b'
  - '(?i)\brank(?:ing|s)?\b'
  - '(?i)\bbadges?\b'
  - '(?i)\bachievement(s)?\b'
  - '(?i)\bcreator\s+fund\b'
  - '(?i)\bpayout(s)?\b'

  # --- limits / modes (product-y) ---
  - '(?i)\bupload\s+limit(s)?\b'
  - '(?i)\brate\s+limit(s|ing)?\b'
  - '(?i)\bguest\s+mode\b'

  # --- regional product pilots (non-legal) ---
  - '(?i)\btrial\s+run\b'
  - '(?i)\bgeo(?:-|\s*)bucket(s|ing)?\b'
  - '(?i)\b(region|country|market|locale)[-\s]?(first|only)\b'

minors_hints:
  - "(?i)minor(s)?"
  - "(?i)teen(ager)?s?"
  - '\b13-1[6-9]\b'
  - '\bunder\s*1[6-8]\b'
  - '\bage\s*gates?\b'
  - '\bparental\b'

pf_hints:
  - "(?i)personal(ized|isation|ization)"
  - "(?i)recommend(ation|er)s?"
  - "(?i)\\bPF\\b"

csam_hints:
  - '\bcsam\b'
  - 'child sexual abuse'
  - '\bncmec\b'
  - '\breport(ing)?\s+requirement(s)?\b'

synonyms:
  dsa:
    - dsa
    - eu digital services act
    - digital services act
  california_kids_act:
    - california kids act
    - sb 976
    - sb976
  florida_online_protections:
    - florida online protections
    - florida online protections for minors
  utah_social_media_regulation:
    - utah social media regulation act
    - utah social media act
  us_ncmec_reporting:
    - us ncmec reporting
    - ncmec
    - cybertipline
    - csam reporting